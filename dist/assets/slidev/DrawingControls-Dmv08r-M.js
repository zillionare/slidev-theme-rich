import{e as I,u as J,v as O,w as Q,x as W,y as X,z as Z,A as ee,B as ne,C as te,D as se,E as oe}from"../modules/unplugin-icons-sn8kgbm3.js";import{d as z,t as L,R as le,aD as ae,o as w,b as B,f as ie,h as V,A as e,c as h,k as l,l as n,i as a,af as s,e as u,x as re,al as g,aE as ue,F as ce,am as de,an as k,g as _e}from"../modules/vue-wyXTn7LN.js";import{L as pe}from"../modules/shiki-BfBsVyTL.js";import{u as me,_ as i,V as D}from"./play-CInr7huI.js";import"../index-qB7uHyZH.js";import"./context-CYhDBl2u.js";const ge=z({__name:"Draggable",props:{storageKey:{},initial:{}},setup($){const c=$,f=L(null),v=c.initial??{x:0,y:0},y=c.storageKey?le(c.storageKey,v):L(v),{style:C}=ae(f,{initialValue:y});return(b,_)=>(w(),B("div",{ref_key:"el",ref:f,class:"fixed",style:V(e(C))},[ie(b.$slots,"default")],4))}}),we=u("svg",{width:"1em",height:"1em",class:"-mt-0.5",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[u("path",{d:"M21.71 3.29a1 1 0 0 0-1.42 0l-18 18a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l18-18a1 1 0 0 0 0-1.42z",fill:"currentColor"})],-1),fe=u("svg",{viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},[u("line",{x1:"2",y1:"15",x2:"22",y2:"4",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round"}),s(),u("line",{x1:"2",y1:"24",x2:"28",y2:"10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),s(),u("line",{x1:"7",y1:"31",x2:"29",y2:"19",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round"})],-1),ve={class:"flex bg-main p-2"},be={class:"inline-block w-7 text-center"},ke={class:"pt-.5"},ze=z({__name:"DrawingControls",setup($){const{brush:c,canClear:f,canRedo:v,canUndo:y,clear:C,drauu:b,drawingEnabled:_,drawingMode:r,drawingPinned:d,brushColors:M}=me();function S(){b.undo()}function E(){b.redo()}let x="stylus";function p(m){r.value=m,_.value=!0,m!=="eraseLine"&&(x=m)}function A(m){c.color=m,_.value=!0,r.value=x}return(m,t)=>{const N=I,R=J,U=O,K=Q,F=W,P=X,T=Z,j=ee,Y=ne,q=te,G=se,H=oe;return w(),h(ge,{class:a(["flex flex-wrap text-xl p-2 gap-1 rounded-md bg-main shadow transition-opacity duration-200 z-20 border border-main",e(_)?"":e(d)?"opacity-40 hover:opacity-90":"opacity-0 pointer-events-none"]),"storage-key":"slidev-drawing-pos","initial-x":10,"initial-y":10},{default:l(()=>[n(i,{title:"Draw with stylus",class:a({shallow:e(r)!=="stylus"}),onClick:t[0]||(t[0]=o=>p("stylus"))},{default:l(()=>[n(N)]),_:1},8,["class"]),s(),n(i,{title:"Draw a line",class:a({shallow:e(r)!=="line"}),onClick:t[1]||(t[1]=o=>p("line"))},{default:l(()=>[we]),_:1},8,["class"]),s(),n(i,{title:"Draw an arrow",class:a({shallow:e(r)!=="arrow"}),onClick:t[2]||(t[2]=o=>p("arrow"))},{default:l(()=>[n(R)]),_:1},8,["class"]),s(),n(i,{title:"Draw an ellipse",class:a({shallow:e(r)!=="ellipse"}),onClick:t[3]||(t[3]=o=>p("ellipse"))},{default:l(()=>[n(U)]),_:1},8,["class"]),s(),n(i,{title:"Draw a rectangle",class:a({shallow:e(r)!=="rectangle"}),onClick:t[4]||(t[4]=o=>p("rectangle"))},{default:l(()=>[n(K)]),_:1},8,["class"]),s(),n(i,{title:"Erase",class:a({shallow:e(r)!=="eraseLine"}),onClick:t[5]||(t[5]=o=>p("eraseLine"))},{default:l(()=>[n(F)]),_:1},8,["class"]),s(),n(D),s(),n(e(pe),null,{popper:l(()=>[u("div",ve,[u("div",be,re(e(c).size),1),s(),u("div",ke,[g(u("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>e(c).size=o),type:"range",min:"1",max:"15",onChange:t[7]||(t[7]=o=>r.value=e(x))},null,544),[[ue,e(c).size]])])])]),default:l(()=>[n(i,{title:"Adjust stroke width",class:a({shallow:e(r)==="eraseLine"})},{default:l(()=>[fe]),_:1},8,["class"]),s()]),_:1}),s(),(w(!0),B(ce,null,de(e(M),o=>(w(),h(i,{key:o,title:"Set brush color",class:a(e(c).color===o&&e(r)!=="eraseLine"?"active":"shallow"),onClick:ye=>A(o)},{default:l(()=>[u("div",{class:a(["w-6 h-6 transition-all transform border",e(c).color!==o?"rounded-1/2 scale-85 border-white":"rounded-md border-gray-300/50"]),style:V(e(_)?{background:o}:{borderColor:o})},null,6)]),_:2},1032,["class","onClick"]))),128)),s(),n(D),s(),n(i,{title:"Undo",class:a({disabled:!e(y)}),onClick:t[8]||(t[8]=o=>S())},{default:l(()=>[n(P)]),_:1},8,["class"]),s(),n(i,{title:"Redo",class:a({disabled:!e(v)}),onClick:t[9]||(t[9]=o=>E())},{default:l(()=>[n(T)]),_:1},8,["class"]),s(),n(i,{title:"Delete",class:a({disabled:!e(f)}),onClick:t[10]||(t[10]=o=>e(C)())},{default:l(()=>[n(j)]),_:1},8,["class"]),s(),n(D),s(),n(i,{title:e(d)?"Unpin drawing":"Pin drawing",class:a({shallow:!e(d)}),onClick:t[11]||(t[11]=o=>d.value=!e(d))},{default:l(()=>[g(n(Y,{class:"transform -rotate-45"},null,512),[[k,e(d)]]),s(),g(n(q,null,null,512),[[k,!e(d)]])]),_:1},8,["title","class"]),s(),e(_)?(w(),h(i,{key:0,title:e(d)?"Drawing pinned":"Drawing unpinned",class:a({shallow:!e(_)}),onClick:t[12]||(t[12]=o=>_.value=!e(_))},{default:l(()=>[g(n(G,null,null,512),[[k,e(d)]]),s(),g(n(H,null,null,512),[[k,!e(d)]])]),_:1},8,["title","class"])):_e("v-if",!0)]),_:1},8,["class"])}}});export{ze as default};
